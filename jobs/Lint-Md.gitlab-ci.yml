# Job to lint all markdown in the project. Uses default markdownlint
# configuration file if no project-specific configuration is found.

lint_md:
  extends:
    - .node
  stage: lint
  variables:
    CONFIG_FILE_LINK: https://gitlab.com/gitlab-ci-utils/config-files/-/raw/9.0.1/Linters/.markdownlint.json
  needs: []
  rules:
    - exists:
        - '**/*.md'
  script:
    - npm install -g markdownlint-cli2@0.9.2
    # If settings file does not exist, get default from config-file project
    - if [ ! -f .markdownlint.json ]; then (wget $CONFIG_FILE_LINK) fi
    - markdownlint-cli2 "**/*.md" "#node_modules"
